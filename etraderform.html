<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>
			Imperial Asset Managers Limited – We are Imperial….Proudly Imperial
		</title>
		<link rel="stylesheet" href="style.css" />
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
		/>

		<style>
			.preview-img {
				display: block;
				margin-top: 10px;
				max-width: 100%;
				height: auto;
				max-height: 300px;
				border: 1px solid #ccc;
				border-radius: 5px;
				object-fit: cover;
			}

			.loadingBtn {
				background-color: #cdc9c0;
				pointer-events: none;
				cursor: not-allowed;
			}
		</style>

		<style>
			.hidden {
				display: none;
			}
			.hidden {
				display: none;
			}
			.etraderformgrid .whitebtn {
				background-color: white;
				color: black !important;
			}
		</style>

		<style>
			.fblk {
				flex-direction: column;
				gap: 2px;
			}

			.btnk {
				display: flex;
				flex-direction: row;
				gap: 10px;
			}
		</style>
	</head>
	<body>
		<div class="overlay" id="overlay"></div>

		<!-- Popup -->
		<div class="popup" id="popup">
			<div class="popup-content">
				<div class="popuptop">
					To access this research, kindly create an account.
					<div class="close-bt" onclick="closePopup()">x</div>
				</div>
				<div class="myform">
					<div class="formtitle">Create an Account</div>
					<input type="text" placeholder="First Name" />
					<input type="email" placeholder="Email" />
					<input type="text" placeholder="Phone Number" />
					<input type="text" placeholder="Country" />
					<input type="password" placeholder="Password" />
					<button>Submit</button>
				</div>
			</div>
		</div>

		<header>
			<div class="containers" id="header">
				<div class="logo">
					<img src="assets/IAML Logo-01.png" alt="" />
				</div>
				<div class="menu-toggle" onclick="toggleMenu()">
					<span></span>
					<span></span>
					<span></span>
				</div>
				<div class="links">
					<a href="about.html">About</a>
					<a href="services.html">Services</a>
					<a href="careers.html">Careers</a>
					<a href="e-trader.html">E-Trader</a>
					<a href="login.html" class="login">Login</a>
					<a href="#openAccounts" id="signup-link" class="register">Signup</a>
				</div>
			</div>
		</header>
		<div
			id="openAccounts"
			style="
				position: fixed;
				background: rgb(0, 0, 0, 0.3);
				top: 0;
				height: 100%;
				z-index: 99999;
				display: none;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			"
		>
			<div class="git" style="position: relative">
				<span
					id="closeModal"
					style="
						font-size: 1rem;
						border: 1px solid rgb(51, 50, 50);
						padding: 0 10px;
						position: absolute;
						right: 0.5rem;
						top: 5px;
						cursor: pointer;
					"
					>x</span
				>
				<div class="faqtitle">Open an account with us</div>
				<div class="faqsubtitle">
					Imperial-trader, you can trade your securities online, in real time
					with as little as a minimum account opening balance of N5,000 only
					from wherever you are. We provide a comprehensive range of services to
					meet and execute on your investment requirements
				</div>

				<div class="btns">
					<button id="individual-account-btn">
						Open an Individual Account
					</button>
					<button id="corporate-account-btn">Open a Corporate Account</button>

					<script>
						const signupLink = document.getElementById("signup-link");
						const openAccounts = document.getElementById("openAccounts");
						const closeModal = document.getElementById("closeModal");

						signupLink.addEventListener("click", (e) => {
							e.preventDefault();
							openAccounts.style.display = "flex";
						});
						closeModal.addEventListener("click", () => {
							openAccounts.style.display = "none";
						});

						const individualAccountBtn = document.getElementById(
							"individual-account-btn"
						);
						const corporateAccountBtn = document.getElementById(
							"corporate-account-btn"
						);

						individualAccountBtn.addEventListener("click", () => {
							window.location.href = "etraderform.html";
						});
						corporateAccountBtn.addEventListener("click", () => {
							window.location.href = "ecorporateform.html";
						});
					</script>
				</div>
			</div>
		</div>
		<div class="ovl"></div>
		<main>
			<div class="containers etarderform">
				<h1>Individual Account Opening Form</h1>
				<div class="formprogress">
					<div class="progressdata" id="progress-text">1 / 5</div>
				</div>

				<!-- Multi-Step Form -->
				<form id="multistep-form">
					<!-- Step 1: Personal Information -->
					<div class="step step-1">
						<h3>Step 1: Personal Information</h3>
						<div class="etraderformgrid">
							<div class="fblk">
								<label for="title">Title *</label>
								<select id="title" required>
									<option value="">Select Prefix</option>
									<option value="Mr">Mr</option>
									<option value="Mrs">Mrs</option>
									<option value="Miss">Miss</option>
									<option value="Dr">Dr</option>
								</select>
							</div>
							<div class="fblk">
								<label for="first-name">First Name *</label>
								<input
									type="text"
									id="first-name"
									placeholder="Enter First Name"
									required
								/>
							</div>
							<div class="fblk">
								<label for="middle-name">Middle Name *</label>
								<input
									type="text"
									id="middle-name"
									placeholder="Enter Middle Name"
									required
								/>
							</div>
							<div class="fblk">
								<label for="last-name">Last Name *</label>
								<input
									type="text"
									id="last-name"
									placeholder="Enter Last Name"
									required
								/>
							</div>
							<div class="fblk">
								<label for="email">Email Address *</label>
								<input
									type="email"
									id="email"
									placeholder="example@gmail.com"
									required
								/>
							</div>
							<div class="fblk">
								<label for="phone">Phone Number *</label>
								<input
									type="text"
									id="phone"
									placeholder="Enter Phone No"
									required
								/>
							</div>
							<div class="fblk">
								<label for="dob">Date of Birth *</label>
								<input type="date" id="dob" required />
							</div>
							<div class="fblk">
								<label for="marital-status">Marital Status *</label>
								<select id="marital-status" required>
									<option value="">Select Marital Status</option>
									<option value="Single">Single</option>
									<option value="Married">Married</option>
									<option value="Divorced">Divorced</option>
									<option value="Widowed">Widowed</option>
								</select>
							</div>
							<div class="fblk">
								<label for="nationality">Nationality *</label>
								<input
									type="text"
									id="nationality"
									placeholder="Select Nationality"
									required
								/>
							</div>
							<div class="fblk">
								<label for="country">Country *</label>
								<input
									type="text"
									id="country"
									placeholder="Select Country"
									required
								/>
							</div>
							<div class="fblk">
								<label for="gender">Gender *</label>
								<select id="gender" required>
									<option value="">Select Gender</option>
									<option value="Male">Male</option>
									<option value="Female">Female</option>
									<option value="Other">Other</option>
								</select>
							</div>
							<div class="fblk">
								<label for="religion">Religion *</label>
								<input
									type="text"
									id="religion"
									placeholder="Select Religion"
									required
								/>
							</div>
							<div class="fblk">
								<label for="mothers-name">Mother's Maiden Name *</label>
								<input
									type="text"
									id="mothers-name"
									placeholder="Enter Mother's Maiden Name"
									required
								/>
							</div>
							<div class="fblk">
								<label for="landmark">Nearest Landmark *</label>
								<input
									type="text"
									id="landmark"
									placeholder="Enter Nearest Landmark"
									required
								/>
							</div>
							<div class="fblk">
								<label for="state">State of Origin *</label>
								<input
									type="text"
									id="state"
									placeholder="Select State of Origin"
									required
								/>
							</div>
							<div class="fblk">
								<label for="lga">LGA of Origin *</label>
								<input type="text" id="lga" placeholder="Select LGA" required />
							</div>
							<div class="fblk">
								<label for="residential-address">Residential Address *</label>
								<input
									type="text"
									id="residential-address"
									placeholder="Enter Residential Address"
									required
								/>
							</div>
							<div class="fblk">
								<label for="id-type">ID Type *</label>
								<select id="id-type" required>
									<option value="">Select ID Type</option>
									<option value="NIN">NIN</option>
									<option value="Passport">Passport</option>
									<option value="Driver's License">Driver's License</option>
									<option value="Voter's Card">Voter's Card</option>
								</select>
							</div>
							<div class="fblk">
								<label for="id-number">ID Number *</label>
								<input
									type="text"
									id="id-number"
									placeholder="Enter ID Number"
									required
								/>
							</div>
						</div>
						<div class="fblk btnk etraderformgrid">
							<button type="button" onclick="nextStep(1)">Next</button>
						</div>
					</div>

					<!-- Step 2: Address Information -->
					<div class="step step-2 hidden">
						<h3>Step 2: Address Information</h3>
						<div class="etraderformgrid">
							<div class="fblk">
								<label for="home-address">Home Address</label>
								<input
									type="text"
									id="home-address"
									placeholder="Home Address"
									required
								/>
							</div>
							<div class="fblk">
								<label for="home-phone">Home Telephone</label>
								<input
									type="text"
									id="home-phone"
									placeholder="Home Telephone"
								/>
							</div>
							<div class="fblk">
								<label for="office-address">Office Address</label>
								<input
									type="text"
									id="office-address"
									placeholder="Office Address"
									required
								/>
							</div>
							<div class="fblk">
								<label for="office-phone">Office Telephone</label>
								<input
									type="text"
									id="office-phone"
									placeholder="Office Telephone"
								/>
							</div>
							<div class="fblk">
								<label for="office-email">Office Email</label>
								<input
									type="email"
									id="office-email"
									placeholder="example@gmail.com"
									required
								/>
							</div>
						</div>
						<div class="fblk btnk etraderformgrid">
							<button type="button" onclick="prevStep(2)" class="whitebtn">
								Previous
							</button>
							<button type="button" onclick="nextStep(2)">Next</button>
						</div>
					</div>

					<!-- Step 3: Employment & Income Details -->
					<div class="step step-3 hidden">
						<h3>Step 3: Employment & Income Details</h3>
						<div class="etraderformgrid">
							<div class="fblk">
								<label for="occupation">Occupation/Line of Business</label>
								<input
									type="text"
									id="occupation"
									placeholder="Occupation/Line of Business"
									required
								/>
							</div>
							<div class="fblk">
								<label for="job-title">Job Title</label>
								<input type="text" id="job-title" placeholder="Job Title" />
							</div>
							<div class="fblk">
								<label for="company-name">Company Name</label>
								<input
									type="text"
									id="company-name"
									placeholder="Company Name"
								/>
							</div>
							<div class="fblk">
								<label for="employment-start-date"
									>Employment Start Date
								</label>
								<input type="date" id="employment-start-date" required />
							</div>
							<div class="fblk">
								<label for="self-employed">Are you Self Employed?</label>
								<select id="self-employed">
									<option value="">Select</option>
									<option value="Yes">Yes</option>
									<option value="No">No</option>
								</select>
							</div>
							<div class="fblk">
								<label for="annual-income">Annual Income</label>
								<input
									type="number"
									id="annual-income"
									placeholder="Annual Income"
									required
								/>
							</div>
						</div>
						<div class="fblk btnk etraderformgrid">
							<button type="button" onclick="prevStep(3)" class="whitebtn">
								Previous
							</button>
							<button type="button" onclick="nextStep(3)">Next</button>
						</div>
					</div>

					<!-- Step 4: Banking Information -->
					<div class="step step-4 hidden">
						<h3>Step 4: Banking Information</h3>
						<div class="etraderformgrid">
							<div class="fblk">
								<label for="bank-name">Bank Name</label>
								<select id="bank-name" required>
									<option value="">Select Bank</option>
								</select>
							</div>
							<div class="fblk">
								<label for="account-number">Account Number</label>
								<input
									type="text"
									id="account-number"
									placeholder="Enter Account Number"
									required
								/>
							</div>
							<div class="fblk">
								<label for="account-name">Account Name</label>
								<input
									type="text"
									id="account-name"
									placeholder="Account Name"
									readonly
								/>
							</div>
							<div class="fblk">
								<label for="bvn">BVN</label>
								<input
									type="text"
									id="bvn"
									placeholder="Bank Verification Number"
									required
								/>
							</div>
						</div>

						<div class="fblk btnk etraderformgrid">
							<button type="button" onclick="prevStep(4)" class="whitebtn">
								Previous
							</button>
							<button type="button" onclick="nextStep(4)">Next</button>
						</div>
					</div>

					<!-- Step 5: Additional Info -->
					<div class="step step-5 hidden">
						<h3>Step 4: Additional Information</h3>
						<div class="etraderformgrid">
							<div class="fblk">
								<label for="introduced-by"
									>Who introduced you to Imperial Asset Managers Limited?</label
								>
								<input
									type="text"
									id="introduced-by"
									placeholder="Introducer"
								/>
							</div>
							<div class="fblk">
								<label for="source-funds"
									>Source of Funds to Operate Account</label
								>
								<input
									type="text"
									id="source-funds"
									placeholder="Source of Funds"
									required
								/>
							</div>
							<div class="fblk">
								<label for="expected-amount">Amount (Expected Annual)</label>
								<input
									type="number"
									id="expected-amount"
									placeholder="Expected Annual Amount"
									required
								/>
							</div>
							<div class="fblk">
								<label for="other-income">Other Sources of Income</label>
								<input
									type="text"
									id="other-income"
									placeholder="Other Sources of Income"
								/>
							</div>
						</div>
						<div class="fblk btnk etraderformgrid">
							<button type="button" onclick="prevStep(5)" class="whitebtn">
								Previous
							</button>
							<button type="button" onclick="nextStep(5)">Next</button>
						</div>
					</div>

					<div class="step step-6 hidden">
						<h3>Step 5: Next Of Kin Information</h3>
						<br />
						<div class="etraderformgrid">
							<div class="fblk">
								<label for="nok-first-name">NOK First Name *</label>
								<input
									type="text"
									id="nok-first-name"
									placeholder="Enter Next Of Kin First Name"
									required
								/>
							</div>
							<div class="fblk">
								<label for="nok-last-name">NOK Last Name *</label>
								<input
									type="text"
									id="nok-last-name"
									placeholder="Enter Next Of Kin Last Name"
									required
								/>
							</div>
							<div class="fblk">
								<label for="nok-email">NOK Email Address *</label>
								<input
									type="text"
									id="nok-email"
									placeholder="Enter Next Of Kin Email"
									required
								/>
							</div>
							<div class="fblk">
								<label for="nok-phone">NOK Phone Number *</label>
								<input
									type="text"
									id="nok-phone"
									placeholder="Enter Next Of Kin Phone Number"
									required
								/>
							</div>
							<div class="fblk">
								<label for="nok-address">NOK Address *</label>
								<input
									type="text"
									id="nok-address"
									placeholder="Enter Next Of Kin Address"
									required
								/>
							</div>
							<div class="fblk">
								<label for="nok-relationship">NOK Relationship *</label>
								<input
									type="text"
									id="nok-relationship"
									placeholder="Enter Next Of Kin Relationship"
									required
								/>
							</div>
						</div>
						<div class="fblk btnk etraderformgrid">
							<button type="button" onclick="prevStep(6)" class="whitebtn">
								Previous
							</button>
							<button type="button" onclick="nextStep(6)">Next</button>
						</div>
					</div>

					<!-- Step 7: Docs Upload -->
					<div class="step step-7 hidden">
						<h3>Step 6: Upload Documents</h3>
						<br />
						<div class="etraderformgrid">
							<!-- Utility -->
							<div class="fblk">
								<label for="utility">Upload Utility Bill</label>
								<input
									type="file"
									id="utility"
									accept="image/*,application/pdf"
									onchange="handleFilePreview('utility', 'utility-preview', 'utility-url')"
								/>
								<img
									id="utility-preview"
									class="preview-img hidden"
									alt="Utility Bill Preview"
								/>
								<input type="hidden" id="utility-url" name="utility-url" />
							</div>

							<!-- Passport -->
							<div class="fblk">
								<label for="passport">Upload Recent Photo</label>
								<input
									type="file"
									id="passport"
									accept="image/*,application/pdf"
									onchange="handleFilePreview('passport', 'passport-preview', 'passport-url')"
								/>
								<img
									id="passport-preview"
									class="preview-img hidden"
									alt="Proof of Identity Preview"
								/>
								<input type="hidden" id="passport-url" name="passport-url" />
							</div>

							<!-- Proof of Identity -->
							<div class="fblk">
								<label for="proofofId">Upload Proof of Identity</label>
								<input
									type="file"
									id="proofofId"
									accept="image/*,application/pdf"
									onchange="handleFilePreview('proofofId', 'proofofId-preview', 'proofofId-url')"
								/>
								<img
									id="proofofId-preview"
									class="preview-img hidden"
									alt="Proof of Identity Preview"
								/>
								<input type="hidden" id="proofofId-url" name="proofofId-url" />
							</div>
						</div>

						<!-- Navigation Buttons -->
						<div class="fblk btnk etraderformgrid">
							<button type="button" onclick="prevStep(7)" class="whitebtn">
								Previous
							</button>
							<button type="submit" id="formBtn">
								Submit
								<div class="loader" id="loader"></div>
							</button>
						</div>
					</div>
				</form>
			</div>
		</main>

		<footer>
			<div class="containers">
				<div class="footersec">
					<div class="footertop">Explore</div>
					<div class="footerbtm">
						<a href="about.html"> About </a>
						<a href="services.html"> Board of Directors </a>
						<a href="services.html"> Management </a>
						<a href="careers.html"> Careers </a>
					</div>
				</div>

				<div class="footersec">
					<div class="footertop">Our Businesses</div>
					<div class="footerbtm">
						<a href="iaml.html">Imperial Asset Managers Limited</a>
						<a href="ical.html">Imperial Capital Advisers Limited</a>
					</div>
				</div>

				<div class="footersec">
					<div class="footertop">Our Newsfeed</div>
					<div class="footerbtm">
						<a href=""> All News</a>
						<a href="research.html">Research and Insights</a>
						<a href="">Blog</a>
						<a href="policy.html">Policies</a>
						<a
							href="RISK-DISCLOSURE-STATEMENT.pdf"
							target="_blank"
							rel="noopener noreferrer"
							>Risk Disclosure Statement</a
						>
					</div>
				</div>

				<div class="footersec">
					<div class="footertop">Subscribe to our newsletter</div>
					<div class="footerbtm">
						Weekly email about trends shaping markets, industries and the global
						economy.
					</div>
					<input type="text" class="footerinput" />
					<button>Submit</button>
				</div>

				<div class="footersec">
					<div class="marg">
						<h6 class="footertop" style="font-size: 16px; margin-bottom: 8px">
							IMP Office Address
						</h6>
						<div class="footerbtm">
							<!-- <a href=""><b>Lagos Office:</b></a> -->
							<a href=""
								>THE IMPERIAL PLACE <br />
								24A, Mainland Way <br />
								Dolphin Estate, <br />
								Ikoyi, Lagos.</a
							>
						</div>
					</div>
					<div>
						<h6 class="footertop" style="font-size: 16px; margin-bottom: 8px">
							ICAL Office Address
						</h6>
						<div class="footerbtm">
							<!-- <a href=""><b>Lagos Office:</b></a> -->
							<a href=""
								>THE EBENEZER PLACE <br />
								148A, Ikeja Way <br />
								Off Association Road <br />
								Dolphin Estate, <br />
								Ikoyi, Lagos.</a
							>
						</div>
					</div>
				</div>
				<div class="footersec map">
					<iframe
						src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3964.5036533682055!2d3.4132098740454926!3d6.457688223926582!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x103b8b35b4fdc5a5%3A0x59082e1e16d38ed5!2s24%20Mainland%20Way%2C%20Dolphine%20Estate%2C%20Lagos%20106104%2C%20Lagos!5e0!3m2!1sen!2sng!4v1736887923932!5m2!1sen!2sng"
						width="100%"
						height="100%"
						loading="lazy"
						title="Imperial asset"
						style="border: none; margin-bottom: 20px"
						referrerpolicy="no-referrer-when-downgrade"
					>
					</iframe>
					<iframe
						src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15857.979123387264!2d3.4184!3d6.458821!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x238182d4bcfe0325!2sImperial+Asset+Managers+Limited!5e0!3m2!1sen!2sng!4v1550768151695"
						width="100%"
						height="100%"
						loading="lazy"
						title="Imperial asset"
						style="border: none"
					>
					</iframe>
				</div>

				<div class="footersec">
					<div class="footertop">Reach Us</div>
					<div class="footerbtm">
						<!-- <a href=""><b>Send a Message</b></a> -->

						<div class="reach">
							<div>
								<span
									><img
										src="./assets/envelope-solid.svg"
										alt="email address"
									/><span class="sp">IMP Email</span></span
								>
								<span
									><img
										style="visibility: hidden"
										src="./assets/envelope-solid.svg"
										alt="email address"
									/>
									<a class="no-copy" href="#">talk2us@imperialasset.com.ng</a>
								</span>
							</div>
							<div>
								<span
									><img
										src="./assets/envelope-solid.svg"
										alt="email address"
									/><span class="sp">ICAL Email</span></span
								>
								<span
									><img
										style="visibility: hidden"
										src="./assets/envelope-solid.svg"
										alt="email address"
									/>
									<a class="no-copy" href="#"
										>talk2capitaladvisers@imperial<br />asset.com.ng</a
									>
								</span>
							</div>
							<span
								><img src="./assets/phone-solid.svg" alt="phone" />234-706 043
								5102
							</span>
							<span
								><img src="./assets/phone-solid.svg" alt="phone" />234-806 703
								5949</span
							>
							<span
								><img src="./assets/phone-solid.svg" alt="phone" />234-912 500
								7249</span
							>

							<style>
								.no-copy {
									user-select: none;
									-webkit-user-select: none;
									-moz-user-select: none;
									-ms-user-select: none;
								}
								.reach {
									display: flex;
									flex-direction: column;
									gap: 5px;
								}
								.reach span {
									display: flex;
									align-items: center;
									gap: 8px;
								}
								.reach img {
									width: 15px;
								}
								.reach .sp {
									font-weight: 500;
									color: white;
								}
								.reach div {
									line-height: 20px;
									margin-bottom: 10px;
								}
							</style>
						</div>
					</div>
				</div>
				<div class="footersec">
					<img src="assets/COMP.png" alt="" />
				</div>
			</div>
		</footer>

		<!--Stepper functions && User information submission logic -->
		<script>
			let currentStep = 1;
			const totalSteps = 7;
			const steps = document.querySelectorAll(".step");
			const progressText = document.getElementById("progress-text");

			function showStep(step) {
				steps.forEach((el, index) => {
					el.classList.toggle("hidden", index + 1 !== step);
				});
				window.scrollTo({
					top: 0,
					behavior: "smooth",
				});
				progressText.textContent = `${step} / ${totalSteps}`;
			}

			function validateStep(step) {
				const stepFields = document.querySelectorAll(
					`.step:nth-child(${step}) input, .step:nth-child(${step}) select`
				);
				let isValid = true;

				stepFields.forEach((field) => {
					if (!field.value.trim()) {
						isValid = false;
						field.classList.add("error"); // Highlight the empty fields
					} else {
						field.classList.remove("error");
					}
				});

				if (!isValid) {
					alert(
						"Please fill all required fields before proceeding to the next step."
					);
				}

				return isValid;
			}

			function nextStep() {
				if (currentStep < totalSteps && validateStep(currentStep)) {
					currentStep++;
					showStep(currentStep);
				}
			}

			function prevStep() {
				if (currentStep > 1) {
					currentStep--;
					showStep(currentStep);
				}
			}

			// Submission of form data
			document.getElementById("multistep-form").onsubmit = async function (e) {
				e.preventDefault();

				const formData = {};
				const requiredDocFields = ["utility", "passport", "proofofId"];
				const previewFields = [
					"utility-preview",
					"passport-preview",
					"proofofId-preview",
				];

				const xtenantid = `demo`;
				const loadButton = document.getElementById("formBtn");
				const loader = document.getElementById("loader");

				// Check for missing file uploads
				let missingFields = [];
				requiredDocFields.forEach((field) => {
					const file = document.getElementById(field).files.length;
					if (!file) {
						missingFields.push(field.replace(/-/g, " ")); // Format the field name
					}
				});

				// If any required file is missing, show an error
				if (missingFields.length > 0) {
					alert(
						`Please upload the following file(s): ${missingFields.join(", ")}`
					);
					return;
				} else {
					loadButton.disabled = true;
					loadButton.style.backgroundColor = "#cdc9c0";
					loadButton.style.pointerEvents = "none";
					loadButton.style.cursor = " not-allowed";
					loader.style.display = "inline-block";
				}

				// Include other form inputs (excluding file inputs)
				const inputs = document.querySelectorAll(
					"#multistep-form input:not([type='file']), #multistep-form select"
				);

				inputs.forEach((input) => {
					// Append formdata with bank name and bank code
					if (input.id === "bank-name") {
						let sel = document.getElementById(input.id);
						let bankName = sel.options[sel.selectedIndex].text;

						formData[input.id] = bankName;
						formData["bank-code"] = input.value;
					} else {
						formData[input.id] = input.value;
					}
				});

				const clearPreview = () => {
					previewFields.forEach((preview) => {
						const previewInp = document.getElementById(preview);
						previewInp.src = "";
						previewInp.classList.add("hidden");
					});
				};

				const submitDocument = async (rqid, kycDocType, file) => {
					// Form data with file
					const kycFormData = new FormData();
					kycFormData.append("file", file);

					// API endpoint with query parameters
					const kycdocsUploadUrl = `http://localhost:3000/proxy.php?url=http://api.issl.ng:7777/onboarding-api/1.0/newcustomerv4kycdoc?rqid=${rqid}&kycDocType=${kycDocType}`;

					try {
						const res = await fetch(kycdocsUploadUrl, {
							method: "POST",
							headers: {
								"X-TENANTID": xtenantid,
							},
							body: kycFormData,
						});

						const result = await res.json();

						if (res.ok) {
							console.log(
								`${kycDocType} document uploaded successfully:`,
								result
							);
						} else {
							console.error(`Error uploading ${kycDocType} document:`, result);
						}
					} catch (error) {
						console.error("Upload error:", error);
					}
				};

				const uploadKyc = async (rqid) => {
					try {
						await Promise.all(
							requiredDocFields.map(async (kycDocType) => {
								const fileInput = document.getElementById(kycDocType);
								if (fileInput.files.length > 0) {
									return await submitDocument(
										rqid,
										kycDocType,
										fileInput.files[0]
									);
								}
							})
						);

						document.getElementById("multistep-form").reset();
						loadButton.disabled = false;
						loadButton.style.backgroundColor = "#bfa162";
						loadButton.style.pointerEvents = "auto";
						loadButton.style.cursor = "auto";
						loader.style.display = "none";
						clearPreview();

						alert("Form submitted successfully for review");

						window.location.href = "/";
					} catch (error) {
						alert("Failed while uploading documents. Please try again");
					}
				};

				// Prepare data for ISSL API (modify structure if needed)
				const isslData = {
					address: formData["home-address"].trim(),
					address2: formData["residential-address"].trim(),
					altRelationshipMan: formData["introduced-by"].trim(),
					bankers: formData["bank-name"].trim(),
					bankCode: formData["bank-code"].trim(),
					defaultAccountNo: formData["account-number"].trim(),
					bankAccountName: formData["account-name"].trim(),
					bvn: formData["bvn"].trim(),
					country: formData["country"].trim(),
					customerType: "I",
					customerCategory: "I",
					dob: formData["dob"].trim(),
					employerAddress: formData["office-address"].trim(),
					employerName: formData["company-name"].trim(),
					employmentStatus: formData["self-employed"].trim(),
					employmentStartDate: formData["employment-start-date"].trim(),
					email: formData["email"].trim(),
					firstName: formData["first-name"].trim(),
					gender: formData["gender"].trim(),
					grossAnnualIncome: formData["annual-income"].trim(),
					id: formData["id-type"].trim(),
					marketShare: formData["expected-amount"].trim(),
					nin: formData["id-number"].trim(),
					nearestBusStop: formData["landmark"].trim(),
					nokFirstName: formData["nok-first-name"].trim(),
					nokLastName: formData["nok-last-name"].trim(),
					nokEmailAddress: formData["nok-email"].trim(),
					nokPhoneNo: formData["nok-phone"].trim(),
					nokAddress: formData["nok-address"].trim(),
					nokRelationship: formData["nok-relationship"].trim(),
					officeEmail: formData["office-email"].trim(),
					phoneRef: formData["home-phone"].trim(),
					profession: formData["job-title"].trim(),
					lastName: formData["last-name"].trim(),
					lgaOfResidence: formData["lga"].trim(),
					// lgaOfOrigin: formData["lga"].trim(),
					maritalStatus: formData["marital-status"].trim(),
					mothersMaidenName: formData["mothers-name"].trim(),
					nationality: formData["nationality"].trim(),
					natureofEmployment: formData["occupation"].trim(),
					notes: formData["other-income"].trim(),
					otherName: formData["middle-name"].trim(),
					officePhoneNo: formData["office-phone"].trim(),
					occupationDesc: formData["source-funds"].trim(),
					religion: formData["religion"].trim(),
					stateOfOrigin: formData["state"].trim(),
					title: formData["title"].trim(),
					// url: formData["live-photo"],
				};

				const url = `http://localhost:3000/proxy.php?url=http://api.issl.ng:7777/onboarding-api/1.0/newcustomer2/1/${isslData.firstName}/${isslData.lastName}`;

				// Send data to ISSL API
				try {
					const response = await fetch(url, {
						method: "POST",
						headers: {
							"Content-Type": "application/json",
							"X-TENANTID": xtenantid,
						},
						body: JSON.stringify(isslData),
					});

					const result = await response.json();
					if (response.ok) {
						const rqid = result.requestId;
						await uploadKyc(rqid);
					} else {
						console.log("Did not upload successfully");
						alert("Upload failed");
					}
				} catch (error) {
					console.error("Error submitting form:", error);
					alert("An error occurred while submitting the form.");
				}
			};

			// Initial step setup
			showStep(currentStep);
		</script>

		<!-- Toggle menu function -->
		<script>
			function toggleMenu() {
				const links = document.querySelector(".links");
				links.classList.toggle("active");
			}
		</script>

		<!-- File upload function -->
		<script>
			function handleFilePreview(inputId, previewId, hiddenInputId) {
				const fileInput = document.getElementById(inputId);
				const previewImage = document.getElementById(previewId);

				if (fileInput.files.length === 0) {
					alert("Please select a file.");
					return;
				}

				const file = fileInput.files[0];

				// Display a preview for image files
				if (file.type.startsWith("image/")) {
					const reader = new FileReader();
					reader.onload = function (e) {
						previewImage.src = e.target.result;
						previewImage.classList.remove("hidden");
					};
					reader.readAsDataURL(file);
				}
			}
		</script>

		<!-- Fetch Bank List -->
		<script>
			const PAYSTACK_SECRET_KEY =
				"sk_test_9b7782e2e31d0c2156deed534c8a1e7a72a5c1ef"; // Replace with your actual Paystack secret key
			let typingTimer; // Timer for debounce
			const typingDelay = 500; // Delay in milliseconds

			// Function to populate the bank list
			async function fetchBankList() {
				try {
					const response = await fetch("https://api.paystack.co/bank", {
						method: "GET",
						headers: {
							Authorization: `Bearer ${PAYSTACK_SECRET_KEY}`,
							"Content-Type": "application/json",
						},
					});
					const { data } = await response.json();

					if (!data) throw new Error("No data returned from API");

					const bankNameSelect = document.getElementById("bank-name");
					data.forEach((bank) => {
						const option = document.createElement("option");
						option.value = bank.code;
						option.textContent = bank.name;
						bankNameSelect.appendChild(option);
					});
				} catch (error) {
					console.error("Error fetching bank list:", error);
					alert("Unable to fetch bank list. Please try again later.");
				}
			}

			// Function to fetch account name
			async function fetchAccountName() {
				const bankCode = document.getElementById("bank-name").value;
				const accountNumber = document.getElementById("account-number").value;

				// Validate inputs: Bank must be selected, and account number should be 11 digits
				if (!bankCode || accountNumber.length !== 10) {
					document.getElementById("account-name").value = ""; // Clear account name if validation fails
					return;
				}

				try {
					// Construct the URL with query parameters
					const url = `https://api.paystack.co/bank/resolve?account_number=${accountNumber}&bank_code=${bankCode}`;

					// Make the GET request
					const response = await fetch(url, {
						method: "GET",
						headers: {
							Authorization: `Bearer ${PAYSTACK_SECRET_KEY}`,
							"Content-Type": "application/json",
						},
					});

					const { data, status, message } = await response.json();
					if (status) {
						document.getElementById("account-name").value = data.account_name;
					} else {
						alert(message || "Could not resolve account name.");
						document.getElementById("account-name").value = ""; // Clear account name if response fails
					}
				} catch (error) {
					console.error("Error resolving account name:", error);
					alert("An error occurred while fetching account name.");
					document.getElementById("account-name").value = ""; // Clear account name if error occurs
				}
			}

			// Event Listener with Debounce for Account Number Input
			document
				.getElementById("account-number")
				.addEventListener("input", () => {
					clearTimeout(typingTimer); // Clear the previous timer
					typingTimer = setTimeout(fetchAccountName, typingDelay); // Set a new timer to wait before fetching
				});

			// Trigger fetch when bank is selected
			document
				.getElementById("bank-name")
				.addEventListener("change", fetchAccountName);

			// Initialize bank list on page load
			fetchBankList();
		</script>
	</body>
</html>
